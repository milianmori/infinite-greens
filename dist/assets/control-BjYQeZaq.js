import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */const m=["noiseLevel","noiseType","lfoEnabled","lfoRate","lfoDepth","lfoWave","exciterCutoff","exciterHP","exciterBandQNoise","exciterBandQRain","monitorExciter","rainEnabled","rainGain","rainRate","rainDurMs","rainSpread","rainCenter","rainLimbs"];let o=null,l=!1;function u(e){return document.getElementById(e)}const s="exciterStateV1";function f(e){try{const n=localStorage.getItem(e);return n?JSON.parse(n):null}catch{return null}}function h(e,n){try{localStorage.setItem(e,JSON.stringify(n||{}))}catch{}}function d(e){const t={...f(s)||{},...e};h(s,t)}const x=.1,p=40;function C(e){const n=x,t=p,a=Math.max(n,Math.min(t,parseFloat(e)));return Math.log(a/n)/Math.log(t/n)}function v(e){const n=x,t=p,a=Math.max(0,Math.min(1,parseFloat(e)));return n*Math.pow(t/n,a)}function c(){const e=n=>document.getElementById(n);if(e("noiseLevel")&&(e("noiseLevelVal").textContent=Number(e("noiseLevel").value).toFixed(2)),e("lfoRate")&&(e("lfoRateVal").textContent=Number(e("lfoRate").value).toFixed(2)),e("lfoDepth")&&(e("lfoDepthVal").textContent=Number(e("lfoDepth").value).toFixed(2)),e("exciterCutoff")&&(e("exciterCutoffVal").textContent=e("exciterCutoff").value),e("exciterHP")&&(e("exciterHPVal").textContent=e("exciterHP").value),e("exciterBandQNoise")&&(e("exciterBandQNoiseVal").textContent=e("exciterBandQNoise").value),e("exciterBandQRain")&&(e("exciterBandQRainVal").textContent=e("exciterBandQRain").value),e("rainRate")){const n=parseFloat(e("rainRate").value),t=v(n);e("rainRateVal").textContent=t.toFixed(2)}e("rainDurMs")&&(e("rainDurMsVal").textContent=e("rainDurMs").value),e("rainGain")&&(e("rainGainVal").textContent=Number(e("rainGain").value).toFixed(2)),e("rainSpread")&&(e("rainSpreadVal").textContent=Number(e("rainSpread").value).toFixed(2)),e("rainCenter")&&(e("rainCenterVal").textContent=Number(e("rainCenter").value).toFixed(2)),e("rainLimbs")&&(e("rainLimbsVal").textContent=e("rainLimbs").value)}function b(e,n){o&&o.postMessage({type:"set",id:e,value:n,source:"control"})}function r(e){l=!0;try{for(const[n,t]of Object.entries(e)){const a=u(n);if(a){if(a.type==="checkbox")a.checked=!!t,a.dispatchEvent(new Event("change",{bubbles:!0}));else{n==="rainRate"?a.value=String(C(t)):a.value=String(t);const i=a.tagName==="SELECT"?"change":"input";a.dispatchEvent(new Event(i,{bubbles:!0}))}d({[n]:t})}}}finally{l=!1}c()}function E(){if(typeof BroadcastChannel>"u"){alert("BroadcastChannel is not supported in this browser.");return}o=new BroadcastChannel("exciter-controls"),o.onmessage=n=>{const t=n.data||{};t.source!=="control"&&(t.type==="state"&&t.state?r(t.state):t.type==="set"&&t.id!=null?r({[t.id]:t.value}):t.type==="setMultiple"&&t.values&&r(t.values))};for(const n of m){const t=u(n);if(!t)continue;const a=()=>{if(l)return;let i;t.type==="checkbox"?i=!!t.checked:n==="rainRate"?i=v(parseFloat(t.value)):i=t.value,d({[n]:i}),b(n,i),c()};t.addEventListener("input",a),t.addEventListener("change",a)}o.postMessage({type:"requestState",source:"control"}),c();const e=f(s);e&&r(e)}document.addEventListener("DOMContentLoaded",E);
